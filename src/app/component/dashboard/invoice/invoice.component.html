<div class="content-wrapper w-100" style="overflow:hidden; height: 100%;">

  <div class="filter-toolbar w-100 h-auto">
    <div class="d-flex w-100 h-auto">
      <ejs-toolbar id="toolbar_options" height="auto" width="100%">
        <e-items>
          <e-item tooltipText="{{ language.filterTooltip }}">
            <ng-template #template>
              <div class="toolbarElement float-left" (click)="showFilterPanel()">
                <div class="icon-child">
                  <div>
                    <span class="fa fa-search"></span>
                  </div>
                </div>
                <div class="text-child" style="font-size: 14px">
                  {{ language.filterToolbar }}
                </div>
              </div>
            </ng-template>
          </e-item>

          <e-item tooltipText="{{ language.generatePDFTooltip }}">
            <ng-template #template>
              <div class="toolbarElement float-right" [ngClass]="{'disabled': !isWordOrPDFEnabled}"
                (click)="downloadPDF()">
                <div class="icon-child">
                  <div>
                    <span class="fa fa-file-pdf-o"></span>
                  </div>
                </div>
                <div class="text-child" style="font-size: 14px">
                  {{ language.exportToPDF }}
                </div>
              </div>
            </ng-template>
          </e-item>

          <e-item tooltipText="{{ language.printPDFTooltip }}">
            <ng-template #template>
              <div class="toolbarElement float-right" [ngClass]="{'disabled': !isWordOrPDFEnabled}"
                (click)="printPDF()">
                <div class="icon-child">
                  <div>
                    <span class="fa fa-print"></span>
                  </div>
                </div>
                <div class="text-child" style="font-size: 14px">
                  {{ language.print }}
                </div>
              </div>
            </ng-template>
          </e-item>
          <e-item tooltipText="{{ language.downloadWordTooltip }}">
            <ng-template #template>
              <div class="toolbarElement float-right" [ngClass]="{'disabled': !isWordOrPDFEnabled}"
                (click)="downloadWord()">
                <div class="icon-child">
                  <div>
                    <span class="fa fa-file-word-o"></span>
                  </div>
                </div>
                <div class="text-child" style="font-size: 14px">
                  {{ language.downloadWord }}
                </div>
              </div>
            </ng-template>
          </e-item>
        </e-items>
      </ejs-toolbar>
    </div>
    <div *ngIf="displayToolbar" class="d-flex w-100 h-auto right-panel filter-panel ml-3">
      <div class="control-panel e-css">
        <div class="row mt-2">
          <div class="col-sm-3 pr-0">
            <kendo-textbox-container floatingLabel="{{ language.patient }}">
              <kendo-combobox #fieldName1 id="customerUsers" [suggest]="true" [data]="customerUsers"
                [textField]="'shortname'" [valueField]="'id'" (valueChange)="onValueChange($event)"
                [(ngModel)]="customerUser" [filterable]="true" (filterChange)="searchCustomer($event)"
                [loading]="customerLoading">
                <ng-template kendoComboBoxItemTemplate let-dataItem>
                  <p style="height: 50px !important">
                    <span style="font-weight: bold">{{ dataItem.shortname }}</span>
                    <br />
                    <span class="customerInfo" *ngIf="dataItem.city !== ''"> {{ dataItem.city }}</span>
                    <span class="customerInfo" *ngIf="dataItem.street !== ''">/{{ dataItem.street }}</span>
                  </p>
                </ng-template>
              </kendo-combobox>
            </kendo-textbox-container>
          </div>

          <div class="col-sm-3">
            <div class="text-center">
              <input class="k-checkbox" type="checkbox" [(ngModel)]="isPriceIncluded">
              <label class="k-checkbox-label"> {{ language.printBruttoNettoPrice}} </label>
            </div>
          </div>

          <div class="col-sm-3">
            <kendo-dropdownlist [data]="languageList" textField="text" valueField="value"
              [(ngModel)]="selectedInvoiceLanguage" (valueChange)="valueChange($event)">
            </kendo-dropdownlist>
          </div>
        </div>

        <div class="row mt-4">
          <div class="col-sm-6">
            <kendo-daterange>
              <label class="mr-4">
                <span class="date-range-label"> {{ language.startDateLabel }}</span>
                <kendo-dateinput class="full-width" kendoDateRangeStartInput [navigateCalendarOnFocus]="true"
                  [(value)]="range.start">
                </kendo-dateinput>
              </label>
              <label>
                <span class="date-range-label"> {{ language.endDateLabel }} </span>
                <kendo-dateinput class="full-width" kendoDateRangeEndInput [navigateCalendarOnFocus]="true"
                  (valueChange)="popup.toggle()" [(value)]="range.end">
                </kendo-dateinput>
              </label>
              <kendo-daterange-popup [anchor]="anchor" #popup></kendo-daterange-popup>
            </kendo-daterange>
          </div>
        </div>

        <div class="row mt-4">
          <div class="col-sm-4">
            <div class="btn btn-primary" [ngClass]="{'disabled': noDataSelected}" (click)="filter()">{{
              language.filterToolbar }}</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="grid w-100" style="height: 97%">
    <div class="left-panel" style="height: 100%">
      <div class="control-section" style="height: 100%">
        <kendo-grid [style.height.%]="gridHeight" [selectable]="{enabled: true, checkboxOnly: true, mode: 'multiple'}"
          [data]="gridViewData" [pageSize]="pageSize" [skip]="state.skip" [pageable]="true"
          (pageChange)="pageChange($event)" [filter]="state.filter" [loading]="loading">

          <ng-template kendoGridNoRecordsTemplate>
            <div class="row mx-auto" style="margin-top:20%" *ngIf="!loading">
              <div class="col-12 d-flex justify-content-center">
                <h4> {{ language.emptyGridMessage }} </h4>
                <div *ngIf="!displayToolbar" class="btn btn-default" (click)="openFilterPanel()"> {{ language.clickHere
                  }} </div>
              </div>
            </div>
          </ng-template>

          <kendo-grid-checkbox-column [width]="100">
            <ng-template kendoGridHeaderTemplate>
              <div class="text-center">
                <input class="k-checkbox" id="chkHeader" type="checkbox" [disabled]="isCheckBoxDisabled"
                  (click)="selectAll()" [(ngModel)]="isAllChecked">
                <label class="k-checkbox-label" for="chkHeader"></label>
              </div>
            </ng-template>

            <ng-template kendoGridCellTemplate let-dataItem>
              <div class="text-center">
                <input type="checkbox" kendoCheckBox (click)=setSelectedItem(dataItem) [(ngModel)]="dataItem.checked" />
              </div>
            </ng-template>
          </kendo-grid-checkbox-column>

          <kendo-grid-column field="complaint_title" title="{{ language.complaintMenu}}"></kendo-grid-column>
          <kendo-grid-column field="date" title="{{ language.date}}"></kendo-grid-column>
          <kendo-grid-column title="{{ language.doctorColumnTitle}}">
            <ng-template kendoGridCellTemplate let-dataItem>
              <h4>{{ dataItem.firstname }} {{ dataItem.lastname}}</h4>
              <h6>{{ dataItem.email }}</h6>
              <p>{{ dataItem.telephone }}</p>
            </ng-template>
          </kendo-grid-column>

          <kendo-grid-column field="therapies_title" title="{{ language.therapyMenu}}"></kendo-grid-column>
          <kendo-grid-column field="event_category" title="{{ language.eventCategory}}"></kendo-grid-column>
        </kendo-grid>
      </div>
    </div>
  </div>

</div>